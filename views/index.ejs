<!DOCTYPE html>
<html>
<head>
    <title>Leaderboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
    <div class="container mt-5">
        <h1 class="text-center mb-4">Leaderboard</h1>

        <!-- Payment Form -->
        <div class="card mx-auto mb-4" style="max-width: 600px;">
            <div class="card-header">Make a Payment to Join the Leaderboard</div>
            <form action="/payment-begin" target="_blank" method="POST" class="card-body">
                <input type="text" class="form-control mb-3" name="name" placeholder="Your Name" required>
                <input type="number" class="form-control mb-3" name="amount" placeholder="Amount" min="0.01" step="0.01" required>
                <button type="submit" class="btn btn-primary w-100">Make Payment</button>
            </form>
        </div>

        <!-- Leaderboard -->
        <div class="card mx-auto" style="max-width: 600px;">
            <div class="card-header d-flex justify-content-between align-items-center">
                <h3 class="mb-0">Top Scores</h3>
                <button type="button" class="btn btn-outline-secondary btn-sm" onclick="location.reload()">
                    <svg width="16" height="16" fill="currentColor" class="bi bi-arrow-clockwise" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M8 3a5 5 0 1 1-4.546 2.914.5.5 0 0 0-.908-.417A6 6 0 1 0 8 2v1z"/>
                        <path d="M8 4.466V.534a.25.25 0 0 0-.41-.192L5.23 2.308a.25.25 0 0 0 0 .384l2.36 1.966A.25.25 0 0 0 8 4.466z"/>
                    </svg>
                    Refresh
                </button>
            </div>
            <div class="card-body p-0">
            <% if (leaderboard.length > 0) { %>
                <table class="table table-striped mb-0">
                <thead class="table-dark">
                <tr>
                    <th>Rank</th>
                    <th>Player</th>
                    <th>Score</th>
                </tr>
                </thead>
                <tbody>
                <% leaderboard.forEach((player, index) => { %>
                <tr>
                    <td>
                    <% if (index === 0) { %>ðŸ¥‡
                    <% } else if (index === 1) { %>ðŸ¥ˆ
                    <% } else if (index === 2) { %>ðŸ¥‰
                    <% } else { %>#<%= index + 1 %>
                    <% } %>
                    </td>
                    <td><strong><%= player.name %></strong></td>
                    <td><%= player.score.toLocaleString() %></td>
                </tr>
                <% }); %>
                </tbody>
                </table>
            <% } else { %>
                <p class="text-center p-4 text-muted">No scores yet! Be the first to play!</p>
            <% } %>
            </div>
        </div>
    </div>
</body>
</html>
